{"version":3,"sources":["Game.js"],"names":["cc","Class","extends","Component","properties","level","floodPrefab","default","type","Prefab","canvas","Node","move_display","Label","scoreAudio","AudioClip","mode_label","setting_pan","result_pan","btn_restart","btn_friend","lbl_result_title","cup_success","cup_failed","lbl_score","lbl_resul_moves","btn_pause","Sprite","spawnInterval","onLoad","spawnCount","scoreparam","name","rows","limit","arrayPosX","arrayPosY","actions","events","initialize","create_table","load_table","score","game_level","schedule","spawnNewStar","spawnNewStar2","finished","game_successed","colours","Color","BLUE","RED","GREEN","YELLOW","ORANGE","MAGENTA","marginX","marginy","change_level","comein_panAction","moveBy","v2","easing","easeCubicActionOut","comeout_panAction","goout_pan","lobbyAppearAction1","easeElasticOut","lobbyAppearAction2","lobbyAppearAction3","lobbyAppearAction4","lobbyAppearRestart","lobbyAppearFriend","lobbyDisAppearAction1","lobbyDisAppearAction2","lobbyDisAppearAction3","lobbyDisAppearAction4","lobbyDisAppearRestart","lobbyDisAppearFriend","on","EventType","MOUSE_DOWN","out_result_pan_restart","in_result_pan","b_result","zIndex","node","runAction","sequence","fadeOut","delayTime","callFunc","callback_result_in","bind","fadeIn","callback_result_out","string","moves","limit_moves","restart_game","clear_node","row","col","removeChild","game_table","element","destroy","reset_table","numberToSpawn","start_table","colour","flooded","num","level_name","updateMoves","setSpawnCordinate","random_colour","colour_no","Math","floor","random","flood_element","color","flood_neighbours","test_colour_flood","equals","all_flooded","flood","initial","old_colour","remind","star","spawnNewStarByNum","i","j","push","inum","newcolour","newStar","instantiate","starWidth","width","height","x","y","pos","setPosition","getNewStarPosition","parseInt","jnum","inum1","jnum1","newStar1","addChild","getNewStarPosition6","log","inum2","jnum2","inum3","jnum3","inum4","jnum4","inum5","jnum5","newStar2","newStar3","newStar4","newStar5","new_game","gainScore","gameOver","director","loadScene"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        level:[],\r\n        floodPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        canvas: {\r\n            default: null,\r\n            type: cc.Node\r\n        },              \r\n        move_display: {\r\n            default: null,\r\n            type: cc.Label\r\n        },       \r\n        scoreAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        mode_label: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        setting_pan: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        result_pan: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        btn_restart: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        btn_friend: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        lbl_result_title: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        cup_success: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        cup_failed: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        lbl_score: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        lbl_resul_moves: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        btn_pause: {\r\n            default: null,\r\n            type: cc.Sprite\r\n        },\r\n        spawnInterval: 0,        \r\n    },\r\n\r\n    onLoad: function () { \r\n        \r\n        this.spawnCount = 0;\r\n        this.scoreparam = 0;   \r\n        this.level = \r\n        [\r\n            {   name: \"Normal\",  rows:10, limit: 18 },\r\n            {   name: \"Hard\",    rows:12, limit: 24 },\r\n            {   name: \"Hell\",    rows:18, limit: 31 },\r\n            {   name: \"Extreme\", rows:24, limit: 41 }\r\n        ];\r\n        this.arrayPosX = [];\r\n        this.arrayPosY = [];\r\n        this.actions();\r\n        this.events();      \r\n \r\n        this.initialize();        \r\n        this.create_table();\r\n        this.load_table();\r\n        this.score = 0;\r\n        // this.arrayPosX = [];\r\n        // this.rows = 5;\r\n        // this.reset_table();\r\n        // this.setSpawnCordinate();\r\n    },\r\n\r\n    load_table: function()\r\n    {\r\n        if(this.game_level == 0)\r\n            this.schedule(this.spawnNewStar, this.spawnInterval);\r\n        else\r\n            this.schedule(this.spawnNewStar2, this.spawnInterval);\r\n    },\r\n\r\n    initialize: function()\r\n    {\r\n        this.finished = false;\r\n        this.game_level = 0;\r\n        this.game_successed = false;\r\n        this.colours = [cc.Color.BLUE, cc.Color.RED,cc.Color.GREEN,cc.Color.YELLOW,cc.Color.ORANGE,cc.Color.MAGENTA];        \r\n        this.marginX = 50;\r\n        this.marginy = 180;\r\n\r\n        this.change_level(this.game_level);\r\n    },\r\n\r\n    actions: function()\r\n    {\r\n        this.comein_panAction = cc.moveBy(0.5, cc.v2(320, 0)).easing(cc.easeCubicActionOut());\r\n        this.comeout_panAction = cc.moveBy(0.5, cc.v2(-320, 0)).easing(cc.easeCubicActionOut());\r\n        this.goout_pan = cc.moveBy(0.5, cc.v2(-640, 0)).easing(cc.easeCubicActionOut());\r\n\r\n        //Appear Result Pan\r\n        this.lobbyAppearAction1 = cc.moveBy(0.7, cc.v2(0, -280)).easing(cc.easeElasticOut());\r\n        this.lobbyAppearAction2 = cc.moveBy(0.6, cc.v2(0, -280)).easing(cc.easeElasticOut());\r\n        this.lobbyAppearAction3 = cc.moveBy(0.5, cc.v2(0, -280)).easing(cc.easeElasticOut());\r\n        this.lobbyAppearAction4 = cc.moveBy(0.4, cc.v2(0, -280)).easing(cc.easeElasticOut());\r\n\r\n        this.lobbyAppearRestart = cc.moveBy(0.2, cc.v2(320, 0)).easing(cc.easeElasticOut());\r\n        this.lobbyAppearFriend = cc.moveBy(0.1, cc.v2(320, 0)).easing(cc.easeElasticOut());  \r\n        \r\n        //Disapper Result Pan\r\n        this.lobbyDisAppearAction1 = cc.moveBy(0.7, cc.v2(0, 280)).easing(cc.easeElasticOut());\r\n        this.lobbyDisAppearAction2 = cc.moveBy(0.6, cc.v2(0, 280)).easing(cc.easeElasticOut());\r\n        this.lobbyDisAppearAction3 = cc.moveBy(0.5, cc.v2(0, 280)).easing(cc.easeElasticOut());\r\n        this.lobbyDisAppearAction4 = cc.moveBy(0.4, cc.v2(0, 280)).easing(cc.easeElasticOut());\r\n\r\n        this.lobbyDisAppearRestart = cc.moveBy(0.2, cc.v2(-320, 0)).easing(cc.easeElasticOut());\r\n        this.lobbyDisAppearFriend = cc.moveBy(0.1, cc.v2(-320, 0)).easing(cc.easeElasticOut());\r\n    },\r\n\r\n    events: function()\r\n    {\r\n        this.btn_restart.on(cc.Node.EventType.MOUSE_DOWN, function () {            \r\n            this.out_result_pan_restart();                   \r\n        }, this);\r\n\r\n        this.btn_friend.on(cc.Node.EventType.MOUSE_DOWN, function () {            \r\n            // web service                   \r\n        }, this);\r\n    },\r\n\r\n    in_result_pan: function(b_result)\r\n    {\r\n        this.setting_pan.zIndex = 3;\r\n        this.btn_pause.node.runAction(cc.sequence(\r\n            cc.fadeOut(0.7),\r\n            cc.delayTime(0.1)\r\n        ));\r\n        this.result_pan.runAction(cc.sequence(\r\n            cc.moveBy(0.3, cc.v2(320, 0)),\r\n            this.comein_panAction, \r\n            cc.callFunc(this.callback_result_in.bind(this))\r\n        )); \r\n    },\r\n\r\n    out_result_pan_restart: function()\r\n    { \r\n        this.btn_pause.node.runAction(cc.sequence(\r\n            cc.fadeIn(1.5),\r\n            cc.delayTime(0.1)\r\n        ));\r\n        if(this.game_successed)           \r\n        {\r\n            this.cup_success.runAction(cc.sequence(cc.moveBy(0.6, cc.v2(0, 280)), this.lobbyDisAppearAction2));\r\n        }    \r\n        else\r\n        {\r\n            this.cup_failed.runAction(cc.sequence(cc.moveBy(0.6, cc.v2(0, 280)), this.lobbyDisAppearAction2));\r\n        }\r\n        this.lbl_result_title.node.runAction(cc.sequence(\r\n            cc.moveBy(0.7, cc.v2(0, 280)),\r\n            this.lobbyDisAppearAction1,\r\n            cc.callFunc(this.callback_result_out.bind(this))\r\n        ));\r\n        \r\n        this.lbl_score.node.runAction(cc.sequence(cc.moveBy(0.5, cc.v2(0, 280)), this.lobbyDisAppearAction3));\r\n        this.lbl_resul_moves.node.runAction(cc.sequence(cc.moveBy(0.4, cc.v2(0, 280)), this.lobbyDisAppearAction4));        \r\n\r\n        this.btn_restart.runAction(cc.sequence(cc.moveBy(0.2, cc.v2(-320, 0)), this.lobbyDisAppearRestart));\r\n        this.btn_friend.runAction(cc.sequence(cc.moveBy(0.1, cc.v2(-320, 0)), this.lobbyDisAppearFriend));\r\n\r\n    },\r\n\r\n    callback_result_in: function()\r\n    {\r\n        if(this.game_successed)           \r\n        {\r\n            this.lbl_result_title.string = \"PASS\";\r\n            this.cup_success.runAction(cc.sequence(cc.moveBy(0.6, cc.v2(0, -280)), this.lobbyAppearAction2));\r\n        }    \r\n        else\r\n        {\r\n            this.lbl_result_title.string = \"FAIL\";\r\n            this.cup_failed.runAction(cc.sequence(cc.moveBy(0.6, cc.v2(0, -280)), this.lobbyAppearAction2));\r\n        }\r\n        this.lbl_score.string = this.score;\r\n        this.lbl_resul_moves.string = this.moves  + \" / \" + this.limit_moves;\r\n        this.lbl_result_title.node.runAction(cc.sequence(cc.moveBy(0.7, cc.v2(0, -280)), this.lobbyAppearAction1));        \r\n        this.lbl_score.node.runAction(cc.sequence(cc.moveBy(0.5, cc.v2(0, -280)), this.lobbyAppearAction3));\r\n        this.lbl_resul_moves.node.runAction(cc.sequence(cc.moveBy(0.4, cc.v2(0, -280)), this.lobbyAppearAction4));        \r\n\r\n        this.btn_restart.runAction(cc.sequence(cc.moveBy(0.2, cc.v2(320, 0)), this.lobbyAppearRestart));\r\n        this.btn_friend.runAction(cc.sequence(cc.moveBy(0.1, cc.v2(320, 0)), this.lobbyAppearFriend));\r\n        // this.game_successed = false;\r\n    },\r\n\r\n    callback_result_out: function()\r\n    {\r\n        this.result_pan.runAction(cc.sequence(\r\n            cc.moveBy(0.3, cc.v2(-320, 0)),\r\n            this.comeout_panAction, \r\n            cc.callFunc(this.restart_game.bind(this))\r\n        )); \r\n    },\r\n\r\n    restart_game: function()\r\n    {    \r\n        this.game_successed = false;\r\n        this.finished = false;\r\n        this.score = 0;\r\n        this.clear_node();  \r\n        this.change_level(this.game_level);\r\n        this.create_table();\r\n    },    \r\n\r\n    clear_node: function()\r\n    {\r\n        for (var row = 0; row < this.rows; row++) {            \r\n            for (var col = 0; col < this.rows; col++) {\r\n                this.node.removeChild(this.game_table[row][col].element);\r\n                this.game_table[row][col].element.destroy();\r\n                this.game_table[row][col].element = null;\r\n            }\r\n        }\r\n    },\r\n\r\n    reset_table: function()\r\n    {\r\n        this.numberToSpawn = this.rows * this.rows;        \r\n        this.start_table = {};        \r\n        for (var row = 0; row < this.rows; row++) {            \r\n            this.start_table[row] = {};  \r\n            for (var col = 0; col < this.rows; col++)    \r\n                this.start_table[row][col] = 0;\r\n        }  \r\n\r\n        this.game_table = {};\r\n        for (var row = 0; row < this.rows; row++) {\r\n            this.game_table[row] = {};\r\n            for (var col = 0; col < this.rows; col++) {\r\n                this.game_table[row][col] = {\r\n                    colour: null,\r\n                    flooded: false,\r\n                    element: null\r\n                };\r\n            }\r\n        }\r\n    },\r\n\r\n    change_level: function (num)\r\n    {        \r\n        this.game_successed = false;\r\n        this.game_level = num;\r\n        this.rows = this.level[num].rows;\r\n        this.limit_moves = this.level[num].limit;\r\n        this.level_name = this.level[num].name;\r\n        this.moves = 0;\r\n        this.updateMoves();\r\n        this.mode_label.string = this.level_name;        \r\n        this.reset_table();  \r\n        this.setSpawnCordinate();     \r\n    },\r\n\r\n    random_colour: function  ()\r\n    {        \r\n        var colour_no = Math.floor (Math.random () * 6);\r\n        return this.colours[colour_no];\r\n    },    \r\n\r\n    flood_element: function (row, col, colour)\r\n    {\r\n        this.game_table[row][col].colour = colour;\r\n        this.game_table[row][col].element.color = colour;\r\n    },\r\n\r\n    flood_neighbours: function  (row, col, colour)\r\n    {\r\n        if (row < this.rows - 1)\r\n            this.test_colour_flood (row + 1, col, colour);\r\n        if (row > 0)\r\n            this.test_colour_flood (row - 1, col, colour);\r\n        if (col < this.rows - 1)\r\n            this.test_colour_flood (row, col + 1, colour);\r\n        if (col > 0)\r\n            this.test_colour_flood (row, col - 1, colour);\r\n    },\r\n\r\n    test_colour_flood: function  (row, col, colour)\r\n    {\r\n        if (this.game_table[row][col].flooded)\r\n            return;\r\n        if (this.game_table[row][col].colour.equals(colour)) {\r\n            this.game_table[row][col].flooded = true;\r\n            this.scoreparam++;\r\n            this.flood_neighbours (row, col, colour);\r\n        }\r\n    },\r\n\r\n    all_flooded: function  ()\r\n    {\r\n        for (var row = 0; row < this.rows; row++) {\r\n            for (var col = 0; col < this.rows; col++) {\r\n                if (! this.game_table[row][col].flooded) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n\r\n    flood: function(colour, initial)\r\n    {\r\n        if (this.finished)\r\n            return;\r\n        var old_colour = this.game_table[0][0].colour;\r\n        if (! initial && colour == old_colour)\r\n            return;\r\n        this.moves++;        \r\n        \r\n        for (var row = 0; row < this.rows; row++) \r\n            for (var col = 0; col < this.rows; col++) \r\n            {\r\n                if (this.game_table[row][col].flooded)\r\n                 {\r\n                    this.flood_element (row, col, colour);                    \r\n                 } \r\n            }      \r\n        for (var row = 0; row < this.rows; row++)\r\n            for (var col = 0; col < this.rows; col++)\r\n                if (this.game_table[row][col].flooded)\r\n                {\r\n                    this.flood_neighbours (row, col, colour);\r\n                }\r\n        this.score += this.scoreparam * this.scoreparam * 10;        \r\n        this.scoreparam = 0;        \r\n                \r\n        if (this.moves < this.limit_moves)\r\n        {\r\n            if (this.all_flooded ()) \r\n            {\r\n                this.finished = true;\r\n                this.game_successed = true;\r\n                var remind = this.limit_moves - this.moves;\r\n                this.score += remind * remind * 100;           \r\n                this.in_result_pan();\r\n            }\r\n        }\r\n        else\r\n            this.in_result_pan();       \r\n    },\r\n\r\n    create_table: function()\r\n    {\r\n        this.moves = -1;\r\n        this.finished = false;        \r\n        for (var row = 0; row < this.rows; row++) {            \r\n            for (var col = 0; col < this.rows; col++) \r\n            {        \r\n                var colour = this.random_colour();\r\n                this.game_table[row][col].colour = colour;\r\n                // this.start_table[row][col] = colour;\r\n                var star = this.spawnNewStarByNum(row, col, row, colour);                \r\n                this.game_table[row][col].element = star;\r\n                this.game_table[row][col].flooded = false;\r\n            }\r\n        }\r\n        this.game_table[0][0].flooded = true;\r\n        this.flood (this.game_table[0][0].colour, true);\r\n    },\r\n\r\n    setSpawnCordinate: function()\r\n    {      \r\n        this.arrayPosX = [];\r\n        this.arrayPosY = [];\r\n        for(var i = 0; i < this.rows; i++)\r\n            for(var j = 0; j < i+1; j++)\r\n            {\r\n                var num = i -j;\r\n                this.arrayPosX.push(num);\r\n                this.arrayPosY.push(j);\r\n            }   \r\n                // this.start_table[i][j] = i -j;\r\n        for(var i = 0; i < this.rows - 1; i++)\r\n            for(var j = i; j < this.rows - 1; j++)\r\n            {\r\n                var num = this.rows -1 -j + i;\r\n                this.arrayPosX.push(num);\r\n                this.arrayPosY.push(j + 1);\r\n            }   \r\n                // this.start_table[i][j] = this.rows -j + i;\r\n\r\n            this.spawnCount = 0; \r\n        // for(var i = 0; i < this.arrayPosX.length; i++)\r\n            // cc.log(this.arrayPosX[i] + \",\" + this.arrayPosY[i]);\r\n    },\r\n\r\n    spawnNewStarByNum: function(i, j, inum, newcolour) {\r\n              \r\n        var newStar = cc.instantiate(this.floodPrefab);\r\n        var color = newStar.color;                \r\n        newStar.color = newcolour;\r\n        // this.node.addChild(newStar);\r\n        \r\n        var starWidth = (this.canvas.width - 2 * this.marginX) / this.rows;\r\n        newStar.width = starWidth;\r\n        newStar.height = starWidth;      \r\n\r\n        var x =  starWidth * inum - this.canvas.width / 2 + starWidth / 2 + this.marginX;\r\n        var y =  this.canvas.height / 2 - starWidth * j - starWidth / 2  - this.marginy;\r\n        var pos = cc.v2( x , y);\r\n        newStar.setPosition(pos);   \r\n        return newStar;   \r\n    },\r\n\r\n    spawnNewStar: function() \r\n    {        \r\n        if (this.spawnCount >= this.numberToSpawn) {\r\n            return;\r\n        }  \r\n        this.getNewStarPosition();\r\n        this.spawnCount+=2;\r\n    },\r\n\r\n    getNewStarPosition: function () {\r\n\r\n        var i = this.spawnCount % this.rows;\r\n        var j = parseInt(this.spawnCount / this.rows);\r\n        var inum = parseInt(this.arrayPosX[this.spawnCount]);\r\n        var jnum = parseInt(this.arrayPosY[this.spawnCount]);\r\n        var inum1 = parseInt(this.arrayPosX[this.spawnCount + 1]);\r\n        var jnum1 = parseInt(this.arrayPosY[this.spawnCount + 1]);    \r\n        var newStar = this.game_table[inum][jnum].element;\r\n        var newStar1 = this.game_table[inum1][jnum1].element;      \r\n        this.node.addChild(newStar);\r\n        this.node.addChild(newStar1);\r\n    },\r\n\r\n    spawnNewStar2: function() \r\n    {        \r\n        if (this.spawnCount >= this.numberToSpawn) {\r\n            return;\r\n        }  \r\n        this.getNewStarPosition6();\r\n        this.spawnCount+=6;\r\n    },\r\n\r\n    getNewStarPosition6: function () {\r\n        cc.log(6);\r\n        var i = this.spawnCount % this.rows;\r\n        var j = parseInt(this.spawnCount / this.rows);\r\n        var inum = parseInt(this.arrayPosX[this.spawnCount]);\r\n        var jnum = parseInt(this.arrayPosY[this.spawnCount]);\r\n        var inum1 = parseInt(this.arrayPosX[this.spawnCount + 1]);\r\n        var jnum1 = parseInt(this.arrayPosY[this.spawnCount + 1]);\r\n        var inum2 = parseInt(this.arrayPosX[this.spawnCount + 2]);\r\n        var jnum2 = parseInt(this.arrayPosY[this.spawnCount + 2]);    \r\n        var inum3 = parseInt(this.arrayPosX[this.spawnCount + 3]);\r\n        var jnum3 = parseInt(this.arrayPosY[this.spawnCount + 3]);\r\n        var inum4 = parseInt(this.arrayPosX[this.spawnCount + 4]);\r\n        var jnum4 = parseInt(this.arrayPosY[this.spawnCount + 4]); \r\n        var inum5 = parseInt(this.arrayPosX[this.spawnCount + 5]);\r\n        var jnum5 = parseInt(this.arrayPosY[this.spawnCount + 5]);     \r\n        var newStar = this.game_table[inum][jnum].element;\r\n        var newStar1 = this.game_table[inum1][jnum1].element;\r\n        var newStar2 = this.game_table[inum2][jnum2].element;  \r\n        var newStar3 = this.game_table[inum3][jnum3].element;\r\n        var newStar4 = this.game_table[inum4][jnum4].element;\r\n        var newStar5 = this.game_table[inum5][jnum5].element;        \r\n        this.node.addChild(newStar);\r\n        this.node.addChild(newStar1);\r\n        this.node.addChild(newStar2);\r\n        this.node.addChild(newStar3);\r\n        this.node.addChild(newStar4);\r\n        this.node.addChild(newStar5);\r\n    },\r\n\r\n    new_game: function()\r\n    {\r\n        this.create_table();\r\n    },\r\n\r\n    updateMoves: function () {                \r\n        this.move_display.string = this.moves + \" / \" + this.limit_moves; \r\n    },\r\n\r\n    gainScore: function () {\r\n        // this.score += 1;        \r\n        // this.scoreDisplay.string = this.score;        \r\n        // cc.audioEngine.playEffect(this.scoreAudio, false);\r\n    },\r\n\r\n    gameOver: function () {\r\n        // this.player.stopAllActions(); \r\n        cc.director.loadScene('game');\r\n    }\r\n});\r\n"]}